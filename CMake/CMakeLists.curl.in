cmake_minimum_required (VERSION 3.8)

project(curl-download NONE)

include(ExternalProject)

if(CMAKE_HOST_WIN32)
	set(curl_build_type Debug)
else()
	set(curl_build_type @_EP_BUILD_TYPE@)
endif()

ExternalProject_Add(curl-download
	@_EP_GIT_REPO@
	@_EP_GIT_TAG@
	SOURCE_DIR		"@_EP_SOURCE_DIR@"
	BINARY_DIR		"@_EP_BINARY_DIR@"
	TMP_DIR 		"@_EP_TMP_DIR@"
	STAMP_DIR 		"@_EP_STAMP_DIR@"
	INSTALL_DIR 	install
	CMAKE_GENERATOR "@CMAKE_GENERATOR@"
	CMAKE_ARGS		-DCURL_STATICLIB=ON -DBUILD_CURL_EXE=OFF -DBUILD_TESTING=OFF -DCMAKE_USE_WINSSL=ON -DCMAKE_INSTALL_PREFIX=install
	BUILD_COMMAND   cmake --build @_EP_BINARY_DIR@ --config Debug COMMAND cmake --build @_EP_BINARY_DIR@ --config Release
    TEST_COMMAND    ""
	INSTALL_COMMAND cmake --build @_EP_BINARY_DIR@ --config Debug --target INSTALL COMMAND cmake --build @_EP_BINARY_DIR@ --config Release --target INSTALL
)
