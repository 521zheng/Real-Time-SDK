<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>UltraPerformanceAPI-CEditionReferenceManual: Overview: Transport API Encode/Decode Iterator Use</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="10">
 <tbody>
 <tr style="height: 70px;">
  
  <td bgcolor="#FFFFFF" width="100%" valign="middle">
	<table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr>
        <td>&nbsp; </td>
		<td valign="top" width="100%" align="left"><font face="arial" size="3" color="#666666"><b>Transport API C Edition</b></font></td>
      </tr>
    </table>
  </td>

  <td rowspan="2"><a href="http://www.thomsonreuters.com/" target="display"><img alt="Logo" src="../../portal/banner_logo.jpg"/></td>

 </tr>
 </tbody>
</table>

<table cellSpacing="0" cellPadding="0" width="100%" border="0">
  <tr>
    <td bgColor="#cccccc"><img height="3" src="../../portal/invis.gif" width="1"></td>
  </tr>
</table>

</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>UPA&#160;Home</span></a></li>
      <li><a href="modules.html"><span>Contents</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Overview: Transport API Encode/Decode Iterator Use</div>  </div>
</div><!--header-->
<div class="contents">
<p>The following sections describe high level usage of the Transport API Encode and Decode Iterators. Specific iterator structure and function definitions can be found in <a class="el" href="group__RsslIteratorGroup.html">Transport API Iterator Reference Group</a>.</p>
<h2><a class="anchor" id="IterOverview"></a>
Transport API Iterator Overview</h2>
<p>When encoding or decoding RWF content with Transport API, the user leverages an iterator to manage the encoding or decoding process. Transport API defines a single encode iterator type (<a class="el" href="group__RsslEncodeIteratorType.html#ga4e9a334e850eb04f3b97f1cfb0b188df">RsslEncodeIterator</a>) and a single decode iterator type (<a class="el" href="group__RsslDecodeIteratorType.html#ga853f9ad85d0752136f75d2e84db5931b">RsslDecodeIterator</a>). A single instance of this iterator can manage the full depth and breadth of the encoding or decoding process. Alternatly, multiple iterator instances can be used to individually manage separate portions of the encode or decode process. <br/>
<br/>
 The Transport API encoder/decoder does not provide any inherent threading or locking capability. Separate iterator and type instances do not cause contention and do not share resources between instances. Any needed threading, locking, or thread-model implementation is at the discretion of the application. Different application threads can encode or decode different messages without requiring a lock; thus each thread must use its own iterator instance and each message should be encoded or decoded using unique and independent buffers. </p>
<dl class="section note"><dt>Note:</dt><dd>Though possible, Thomson Reuters recommends that you do not encode or decode related messages (messages flowing on the same stream) on different threads as this can impact the delivery order.</dd></dl>
<h3><a class="anchor" id="IterVers"></a>
Iterator RWF Protocol Versioning</h3>
<p>The Transport API iterators help the user to manage version information associated with the RWF content being exchanged. When using the Transport API Transport the protocol type and version information can be exchanged and negotiated on the connection (via the <a class="el" href="structRsslConnectOptions.html" title="RSSL Connect Options used in the rsslConnect call.">RsslConnectOptions</a> or <a class="el" href="structRsslBindOptions.html" title="RSSL Bind Options used in the rsslBind call.">RsslBindOptions</a>). The Transport API will reject any connection establishment when the protocol type does not match across the connection. If the protocol type does match, an appropriate major and minor version will be determined and this should be the version of RWF encoded or decoded when using this connection. After the connection becomes active, this negotiated version information is available and can then be provided to the iterator to ensure that the proper version is encoded or decoded. If not using the Transport API, the user can determine the desired version of RWF to encode and specify this information on their iterator. Transport API provides RWF protocol type and protocol version values in  "rtr\rsslIterators.h" for this purpose. </p>
<dl class="section note"><dt>Note:</dt><dd>Specifying appropriate version information on <a class="el" href="group__RsslDecodeIteratorType.html#ga853f9ad85d0752136f75d2e84db5931b">RsslDecodeIterator</a> and <a class="el" href="group__RsslEncodeIteratorType.html#ga4e9a334e850eb04f3b97f1cfb0b188df">RsslEncodeIterator</a> is important to future-proof applications and avoid incompatability if new RWF functionality is added.</dd></dl>
<p>See <a class="el" href="group__RsslIteratorVersion.html">Iterator RWF Protocol Versioning</a> for more information about Iterator Versioning.</p>
<h2><a class="anchor" id="DecodeIter"></a>
Transport API Decode Iterator Overview</h2>
<p>All RWF decoding requires the use of an <a class="el" href="group__RsslDecodeIteratorType.html#ga853f9ad85d0752136f75d2e84db5931b">RsslDecodeIterator</a>, where a single iterator can manage the full decoding process. For instance, if the application is decoding a message containing an <a class="el" href="structRsslFieldList.html" title="The RsslFieldList container type allows the user to represent a collection of field identifier - valu...">RsslFieldList</a>, the same <a class="el" href="group__RsslDecodeIteratorType.html#ga853f9ad85d0752136f75d2e84db5931b">RsslDecodeIterator</a> can be used to decode the <a class="el" href="structRsslFieldList.html" title="The RsslFieldList container type allows the user to represent a collection of field identifier - valu...">RsslFieldList</a>, all <a class="el" href="structRsslFieldEntry.html" title="One entry contained in an RsslFieldList. When encoding, RsslFieldEntry::dataType should be specified...">RsslFieldEntry</a>, and all types (primitive types or container types) housed in the entries. Seperate iterators can be used as well, depending on the needs of the application. Following the same example, one <a class="el" href="group__RsslDecodeIteratorType.html#ga853f9ad85d0752136f75d2e84db5931b">RsslDecodeIterator</a> can be used to decode the message information (up to the beginning of the <a class="el" href="structRsslFieldList.html" title="The RsslFieldList container type allows the user to represent a collection of field identifier - valu...">RsslFieldList</a> payload). Another <a class="el" href="group__RsslDecodeIteratorType.html#ga853f9ad85d0752136f75d2e84db5931b">RsslDecodeIterator</a> reference can be used to decode the <a class="el" href="structRsslFieldList.html" title="The RsslFieldList container type allows the user to represent a collection of field identifier - valu...">RsslFieldList</a> and entries, and if desired, other iterators can be used to decode the contents of each <a class="el" href="structRsslFieldEntry.html" title="One entry contained in an RsslFieldList. When encoding, RsslFieldEntry::dataType should be specified...">RsslFieldEntry</a>.<br/>
<br/>
 Before decoding begins, the iterator should be initialized to ready it for decoding. Initialization consists of several steps. The <a class="el" href="group__RsslDecodeIteratorType.html#ga650715566a32a523f63c625cf8755252" title="Clears an RsslDecodeIterator, defaults to use current version of RWF.">rsslClearDecodeIterator()</a> function can be used to initialize (or re-initialize for reuse) the <a class="el" href="group__RsslDecodeIteratorType.html#ga853f9ad85d0752136f75d2e84db5931b">RsslDecodeIterator</a>. After clearing, an <a class="el" href="group__RsslBufferStruct.html#gaa07157d4dc418cc86d631c2a4950d6c6">RsslBuffer</a> containing the content to decode should be associated with the <a class="el" href="group__RsslDecodeIteratorType.html#ga853f9ad85d0752136f75d2e84db5931b">RsslDecodeIterator</a>. In addition, RWF version information should be provided to the <a class="el" href="group__RsslDecodeIteratorType.html#ga853f9ad85d0752136f75d2e84db5931b">RsslDecodeIterator</a> so the desired version of RWF is decoded.<br/>
<br/>
 See <a class="el" href="group__RsslDecodeIteratorType.html">Transport API Decode Iterator</a> for more information and code examples.<br/>
<br/>
<br/>
</p>
<h2><a class="anchor" id="EncodeIter"></a>
Transport API Encode Iterator Overview</h2>
<p>All RWF encoding requires the use of an <a class="el" href="group__RsslEncodeIteratorType.html#ga4e9a334e850eb04f3b97f1cfb0b188df">RsslEncodeIterator</a>, where a single iterator can manage the full encoding process. For instance, if the application is encoding a message containing an <a class="el" href="structRsslFieldList.html" title="The RsslFieldList container type allows the user to represent a collection of field identifier - valu...">RsslFieldList</a>, the same <a class="el" href="group__RsslEncodeIteratorType.html#ga4e9a334e850eb04f3b97f1cfb0b188df">RsslEncodeIterator</a> can be used to encode the message header information, the <a class="el" href="structRsslFieldList.html" title="The RsslFieldList container type allows the user to represent a collection of field identifier - valu...">RsslFieldList</a> information, each <a class="el" href="structRsslFieldEntry.html" title="One entry contained in an RsslFieldList. When encoding, RsslFieldEntry::dataType should be specified...">RsslFieldEntry</a>, and the content of each entry (primitive types or container types). Seperate iterators can be used as well, depending on the needs of the application. Following the same example, one <a class="el" href="group__RsslEncodeIteratorType.html#ga4e9a334e850eb04f3b97f1cfb0b188df">RsslEncodeIterator</a> can be used to pre-encode an entry's content. This pre-encoded content can then be set on the <a class="el" href="structRsslFieldEntry.html" title="One entry contained in an RsslFieldList. When encoding, RsslFieldEntry::dataType should be specified...">RsslFieldEntry</a> and encoded using the <a class="el" href="group__RsslEncodeIteratorType.html#ga4e9a334e850eb04f3b97f1cfb0b188df">RsslEncodeIterator</a> that is encoding the <a class="el" href="structRsslFieldList.html" title="The RsslFieldList container type allows the user to represent a collection of field identifier - valu...">RsslFieldList</a>. This encoded field list content can then be set on the <a class="el" href="unionRsslMsg.html" title="The OMM Message Union. All message encoding and decoding functions expect the RsslMsg type...">RsslMsg</a> and yet another <a class="el" href="group__RsslEncodeIteratorType.html#ga4e9a334e850eb04f3b97f1cfb0b188df">RsslEncodeIterator</a> can be used to encode the message and its pre-encoded payload.<br/>
<br/>
 Before encoding begins, the iterator should be initialized to ready it for the encoding process. Initialization consists of several steps. The <a class="el" href="group__RsslEncodeIteratorType.html#ga9f92b5543f309ee021b403fb49d45f1a" title="Clears an RsslEncodeIterator, defaults to use current version of RWF.">rsslClearEncodeIterator()</a> function can be used to initialize (or re-initalize for reuse) the <a class="el" href="group__RsslEncodeIteratorType.html#ga4e9a334e850eb04f3b97f1cfb0b188df">RsslEncodeIterator</a>. After clearing, an <a class="el" href="group__RsslBufferStruct.html#gaa07157d4dc418cc86d631c2a4950d6c6">RsslBuffer</a> with ample memory should be associated with the iterator; this will be the buffer that content is encoded into (if using with the Transport API, this is often a buffer obtained from the <a class="el" href="group__RSSLChannelBuffer.html#ga3e5e94c461dc50f20adfbc574c74ef81" title="Retrieves a RsslBuffer for use.">rsslGetBuffer()</a> function so it can be immediatley written after encoding completes). In addition, RWF version information should be provided to the <a class="el" href="group__RsslEncodeIteratorType.html#ga4e9a334e850eb04f3b97f1cfb0b188df">RsslEncodeIterator</a> so the desired version of RWF is encoded. </p>
<dl class="section note"><dt>Note:</dt><dd>When encoding is complete, the user should query the length of encoded content, setting this information in the <a class="el" href="structRwfBuffer.html#a32b3434ef885f1a2af98de3af1a3df8d">RsslBuffer::length</a>. If encoding fails, the <a class="el" href="group__RsslEncodeIteratorType.html#ga4e9a334e850eb04f3b97f1cfb0b188df">RsslEncodeIterator</a> can be used to roll back content to the last successful encoding point. <br/>
<br/>
 See <a class="el" href="group__RsslEncodeIteratorType.html">Transport API Encode Iterator</a> for more information and code examples.<br/>
<br/>
<br/>
 </dd></dl>
</div><!-- contents -->
<hr class="footer"/><address class="footer"><small>
    <table cellSpacing="0" cellPadding="0" width="100%" border="0">
      <tr>
        <td bgColor="#ffffff"><img height="3" src="../../portal/invis.gif" width="1"></td>
      </tr>
    </table>
    <table cellspacing="0" cellpadding="0" border="0" width="100%">
      <tr>
        <td><img src="../../portal/invis.gif" width="11" height="1"></td>
        <td align="left" valign="top" width="100%"><! -- START OF FOOTER --> 
		<table cellSpacing="0" cellPadding="0" border="0">
          <tr>
            <td><p class="smallfont"><a href="../../portal/copyright.htm">Copyright Notice</a></td>
            <td><p class="smallfont"><font color="#FF6600">&nbsp;|&nbsp;</font> </td>
            <td><p class="smallfont">Last modified on:&nbsp;</td>
            <td><p class="smallfont">Thu Apr 27 2017</td>
          </tr>
        </table>
        <p class="smallfont">&nbsp;</td>
        <td vAlign="top" align="right" width="141"><a href="http://www.reuters.com/">
		<img alt="The Business of Information" src="../../portal/tr_hrz_lrg_rgb_pos.jpg" border="0" WIDTH="140" HEIGHT="50"></a></td>
      </tr>
    </table>
</small></address>
</body>
</html>
